# Harbor Helm Chart Values
# Cấu hình tối giản cho Harbor trong K8s

expose:
  type: nodePort
  tls:
    enabled: false  # Tắt TLS cho môi trường lab
  nodePort:
    ports:
      http:
        nodePort: 30002  # Harbor UI
      https:
        nodePort: 30003

# URL truy cập Harbor (thay <NODE_IP> bằng IP thực tế của node K8s)
externalURL: http://localhost:30002

# Mật khẩu admin mặc định
harborAdminPassword: "Harbor12345"

# Persistence - lưu trữ dữ liệu
persistence:
  enabled: true
  resourcePolicy: "keep"  # Giữ PVC khi xóa Harbor
  persistentVolumeClaim:
    registry:
      size: 20Gi
      storageClass: ""  # Dùng default storageClass
    chartmuseum:
      size: 5Gi
      storageClass: ""
    jobservice:
      size: 2Gi
      storageClass: ""
    database:
      size: 5Gi
      storageClass: ""
    redis:
      size: 2Gi
      storageClass: ""
    trivy:
      size: 5Gi
      storageClass: ""

# Database internal
database:
  type: internal
  internal:
    password: "changeit"

# Redis internal
redis:
  type: internal

# Core components
core:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 1Gi
      cpu: 1000m

# Registry
registry:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 1Gi
      cpu: 1000m

# ChartMuseum - Helm chart repository
chartmuseum:
  enabled: true
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 512Mi
      cpu: 500m

# Trivy - Vulnerability scanner
trivy:
  enabled: true
  resources:
    requests:
      memory: 256Mi
      cpu: 200m
    limits:
      memory: 1Gi
      cpu: 1000m

# Notary - Image signing (tắt để đơn giản)
notary:
  enabled: false

# Portal - Web UI
portal:
  replicas: 1
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 512Mi
      cpu: 500m

# Jobservice
jobservice:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 1Gi
      cpu: 1000m

